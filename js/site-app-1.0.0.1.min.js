_GLOBAL_MODULE.utils={cleanEverythingFromHTML:function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}},_GLOBAL_MODULE.http=function(){function a(e){var t=e.response;if(200<=t.status&&t.status<300)return{data:e.data,headers:t.headers};var n=new Error(e.data.message||t.statusText);throw n.response=t,n}function o(t){var n=encodeURIComponent;return Object.keys(t).map(function(e){return n(e)+"="+n(t[e])}).join("&")}return{checkStatus:a,getQueryString:o,doRequest:function(e,t,n,r,i){return i&&(i=JSON.stringify(i)),n&&(t+="?"+o(n)),fetch(t,{method:e,headers:r,body:i}).then(function(t){return t.json().then(function(e){return{data:e,response:t}},function(e){return logService.error(e),Promise.reject(e)})}).then(a)}}}(),_GLOBAL_MODULE.paginate=function(e,t,n,r){var i,a,o=Math.ceil(e/n);if(t<1?t=1:o<t&&(t=o),o<=r)i=1,a=o;else{var c=Math.floor(r/2),s=Math.ceil(r/2)-1;a=t<=c?(i=1,r):o<=t+s?(i=o-r+1,o):(i=t-c,t+s)}for(var u=(t-1)*n,l=Math.min(u+n-1,e-1),d=[],m=i;m<=a;++m)d.push(m);return{totalItems:e,currentPage:t,pageSize:n,totalPages:o,startPage:i,endPage:a,startIndex:u,endIndex:l,pages:d}},_GLOBAL_MODULE.MovieModel=function(){"use strict";return function(e){this.title=e.movie_title,this.directorName=e.director_name,this.actor1Name=e.actor_1_name,this.actor2Name=e.actor_2_name,this.genres=e.genres.split("|").join(" | "),this.language=e.language,this.country=e.country,this.contentRating=e.content_rating,this.budget=e.budget,this.titleYear=e.title_year,this.plotKeywords=e.plot_keywords.split("|").join(" | "),this.movieImdbLink=e.movie_imdb_link}}(),function(e){var c=e.MovieModel,s=e.http;e.movieService=new function(){var n=10,i=this;i.languages=["English","Japanese","Aboriginal"],i.countries=[],i.fetchMovies=function(e,t,n,r){return i.movies?Promise.resolve(o(e)):request=s.doRequest("GET",a,null,{Accept:"application/json","Content-Type":"application/json"}).then(function(e){return function(e){var t={};if(i.movies=[],!e)return console.warn("Movie list not provided, returning");for(var n=0;n<e.length;n++)i.movies.push(new c(e[n])),i.movies[n].country&&(t[i.movies[n].country]=0);Array.prototype.push.apply(i.countries,Object.keys(t))}(e.data),o()}).catch(function(e){return console.error("Fail to fetch movie List",e),$q.reject(e)})},i.getHeadData=function(){return[{title:"Title",key:"title"},{title:"Director",key:"directorName"},{title:"Actor 1",key:"actor1Name"},{title:"Actor 2",key:"actor2Name"},{title:"genres",key:"genres",sort:null,filter:[],enable:!0},{title:"language",key:"language",sort:null,filter:[],enable:!0},{title:"country",key:"country",sort:null,filter:[],enable:!0},{title:"Content rating",key:"contentRating"},{title:"budget",key:"budget",sort:null,filter:[],enable:!0},{title:"Title Year",key:"titleYear",sort:null,filter:[],enable:!0},{title:"Plot keywords",key:"plotKeywords"},{title:"Imdb Link",key:"movieImdbLink"}]};var a="http://starlord.hackerearth.com/movieslisting";function o(e){if(i.movies){var t=((e=e||1)-1)*n;return{data:i.movies.slice(t,t+n),originalList:i.movies,maxSize:i.movies.length}}}}}(_GLOBAL_MODULE),function(e){"use strict";_GLOBAL_MODULE.themeComponent={setup:function(){var t=document.getElementById("theme-button");t.addEventListener("click",function(e){"dark-theme"===t.getAttribute("theme")?(t.setAttribute("theme","light-theme"),t.innerText="Dark Theme",document.body.className="light-theme"):(t.setAttribute("theme","dark-theme"),t.innerText="Light Theme",document.body.className="dark-theme")})}}}(),function(e){"use strict";var a=document.getElementById("pagination-ui"),n=e.utils,r=1,t=e.paginate;function i(e,t,n){var r=document.createElement("div");e===t&&(r.className+=" active");var i=document.createElement("a");i.setAttribute("page",n||e),i.innerText=e,r.appendChild(i),a.appendChild(r)}e.paginationComponent={init:function(t){a.addEventListener("click",function(e){"A"===e.target.tagName&&(r=parseInt(e.target.getAttribute("page")),t(r))})},setUI:function(e){e&&function(e){n.cleanEverythingFromHTML(a),e.currentPage>e.startPage&&i("<",e.currentPage,e.currentPage-1);for(var t=e.startPage;t<=e.endPage;++t)i(t,e.currentPage);e.currentPage<e.endPage&&i(">",e.currentPage,e.currentPage+1)}(t(e,r,10,5))}}}(_GLOBAL_MODULE),function(e){"use strict";var a,n=document.getElementById("error-msg"),t=document.getElementById("list-spinner"),i=e.movieService,c=e.utils,r=e.paginationComponent,o=e.themeComponent,s=i.getHeadData();function u(e){t.className=e?"show":"hide"}function l(e){v(e)}function d(e,t){var n=document.createElement("td");n.innerText=t,e.appendChild(n)}function m(e,t,n){var r=document.createElement("i");r.className="fa "+t,e.appendChild(r),r.addEventListener("click",function(e){var i;!function(e){for(var t=0;t<s.length;++t)s[t].enable&&(e.key===s[t].key?s[t].sort=!s[t].sort:s[t].sort=null)}(n),i=n,a&&g("budget"===i.key||"titleYear"===i.key?a.sort(function(e,t){var n=parseInt(e[i.key]||0),r=parseInt(t[i.key]||0);return i.sort?n-r:r-n}):a.sort(function(e,t){var n=e[i.key],r=t[i.key];return n==r?0:i.sort?n<r?-1:1:r<n?-1:1}))})}function g(e){!function(){var e=document.querySelector("#movie-table-head");c.cleanEverythingFromHTML(e);for(var t,n,r,i,a=document.createElement("tr"),o=0;o<s.length;++o)t=a,n=s[o],i=r=void 0,r=document.createElement("th"),(i=document.createElement("span")).innerText=n.title,r.appendChild(i),n.enable&&(null==n.sort?(m(r,"fa-caret-up",n),m(r,"fa-caret-down",n)):n.sort?m(r,"fa-caret-up",n):m(r,"fa-caret-down",n)),t.appendChild(r);e.appendChild(a)}(),function(e){var t,n,r,i=document.querySelector("#movie-table-body");for(c.cleanEverythingFromHTML(i),t=0;t<e.length;++t)r=e[t],d(n=document.createElement("tr"),r.title),d(n,r.directorName),d(n,r.actor1Name),d(n,r.actor2Name),d(n,r.genres),d(n,r.language),d(n,r.country),d(n,r.contentRating),d(n,r.budget),d(n,r.titleYear),d(n,r.plotKeywords),d(n,r.movieImdbLink),i.appendChild(n)}(e)}function h(e){window.scrollTo(0,0),c.cleanEverythingFromHTML(n),g(a=e.data),r.setUI(e.maxSize)}function f(e){c.cleanEverythingFromHTML(n);var t=document.createElement("div");t.className="error-msg",t.innerText=-1==e.status?"This request has been blocked; the content must be served over HTTPS.":"Something went wrong",n.appendChild(t)}function v(e,t,n,r){u(!0),i.fetchMovies(e,t,n,r).then(h).catch(f).finally(function(){u(!1)})}r.init(l),o.setup(),v()}(_GLOBAL_MODULE);