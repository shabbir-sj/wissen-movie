_GLOBAL_MODULE.utils={cleanEverythingFromHTML:function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}},_GLOBAL_MODULE.http=function(){function a(e){var t=e.response;if(200<=t.status&&t.status<300)return{data:e.data,headers:t.headers};var n=new Error(e.data.message||t.statusText);throw n.response=t,n}function o(t){var n=encodeURIComponent;return Object.keys(t).map(function(e){return n(e)+"="+n(t[e])}).join("&")}return{checkStatus:a,getQueryString:o,doRequest:function(e,t,n,r,i){return i&&(i=JSON.stringify(i)),n&&(t+="?"+o(n)),fetch(t,{method:e,headers:r,body:i}).then(function(t){return t.json().then(function(e){return{data:e,response:t}},function(e){return logService.error(e),Promise.reject(e)})}).then(a)}}}(),_GLOBAL_MODULE.paginate=function(e,t,n,r){var i,a,o=Math.ceil(e/n);if(t<1?t=1:o<t&&(t=o),o<=r)i=1,a=o;else{var c=Math.floor(r/2),l=Math.ceil(r/2)-1;a=t<=c?(i=1,r):o<=t+l?(i=o-r+1,o):(i=t-c,t+l)}for(var u=(t-1)*n,s=Math.min(u+n-1,e-1),d=[],m=i;m<=a;++m)d.push(m);return{totalItems:e,currentPage:t,pageSize:n,totalPages:o,startPage:i,endPage:a,startIndex:u,endIndex:s,pages:d}},_GLOBAL_MODULE.MovieModel=function(){"use strict";return function(e){this.title=e.movie_title,this.directorName=e.director_name,this.actor1Name=e.actor_1_name,this.actor2Name=e.actor_2_name,this.genres=e.genres.split("|").join(" | "),this.language=e.language,this.country=e.country,this.contentRating=e.content_rating,this.budget=e.budget,this.titleYear=e.title_year,this.plotKeywords=e.plot_keywords.split("|").join(" | "),this.movieImdbLink=e.movie_imdb_link}}(),function(e){var i=e.MovieModel,c=e.http;e.movieService=new function(){var a=10,o=this;o.languages=["English","Japanese","Aboriginal"],o.countries=[],o.fetchMovies=function(e,t){return o.movies?Promise.resolve(r(e,t)):request=c.doRequest("GET",n,null,{Accept:"application/json","Content-Type":"application/json"}).then(function(e){return function(e){var t={};if(o.movies=[],!e)return console.warn("Movie list not provided, returning");for(var n=0;n<e.length;n++)o.movies.push(new i(e[n])),o.movies[n].country&&(t[o.movies[n].country]=0);Array.prototype.push.apply(o.countries,Object.keys(t))}(e.data),r()}).catch(function(e){return console.error("Fail to fetch movie List",e),$q.reject(e)})},o.getHeadData=function(){return[{title:"Title",key:"title"},{title:"Director",key:"directorName"},{title:"Actor 1",key:"actor1Name"},{title:"Actor 2",key:"actor2Name"},{title:"genres",key:"genres",sort:null,filter:"",enable:!0},{title:"language",key:"language",sort:null,filter:"",enable:!0},{title:"country",key:"country",sort:null,filter:"",enable:!0},{title:"Content rating",key:"contentRating"},{title:"budget",key:"budget",sort:null,filter:"",enable:!0},{title:"Title Year",key:"titleYear",sort:null,filter:"",enable:!0},{title:"Plot keywords",key:"plotKeywords"},{title:"Imdb Link",key:"movieImdbLink"}]};var n="http://starlord.hackerearth.com/movieslisting";function r(e,t){if(o.movies){var n,i=(t=t||[]).filter(function(e){return e.enable&&e.filter&&e.filter.length});n=i.length?o.movies.filter(function(e){var t,n,r;for(t=0;t<i.length;++t)if(n=e[i[t].key].toLowerCase(),r=i[t].filter.trim().toLowerCase(),-1!==n.indexOf(r))return!0}):o.movies;var r=((e=e||1)-1)*a;return{data:n.slice(r,r+a),originalList:o.movies,maxSize:n.length}}}}}(_GLOBAL_MODULE),function(e){"use strict";_GLOBAL_MODULE.themeComponent={setup:function(){var t=document.getElementById("theme-button");t.addEventListener("click",function(e){"dark-theme"===t.getAttribute("theme")?(t.setAttribute("theme","light-theme"),t.innerText="Dark Theme",document.body.className="light-theme"):(t.setAttribute("theme","dark-theme"),t.innerText="Light Theme",document.body.className="dark-theme")})}}}(),function(e){"use strict";var a=document.getElementById("pagination-ui"),n=e.utils,r=1,t=e.paginate;function i(e,t,n){var r=document.createElement("div");e===t&&(r.className+=" active");var i=document.createElement("a");i.setAttribute("page",n||e),i.innerText=e,r.appendChild(i),a.appendChild(r)}e.paginationComponent={init:function(t){a.addEventListener("click",function(e){"A"===e.target.tagName&&(r=parseInt(e.target.getAttribute("page")),t(r))})},setUI:function(e){e&&function(e){n.cleanEverythingFromHTML(a),e.currentPage>e.startPage&&i("<",e.currentPage,e.currentPage-1);for(var t=e.startPage;t<=e.endPage;++t)i(t,e.currentPage);e.currentPage<e.endPage&&i(">",e.currentPage,e.currentPage+1)}(t(e,r,10,5))}}}(_GLOBAL_MODULE),function(e){"use strict";var a,n=document.getElementById("error-msg"),t=document.getElementById("list-spinner"),r=e.movieService,o=e.utils,i=e.paginationComponent,c=e.themeComponent,d=1,m=r.getHeadData();function l(e){t.className=e?"show":"hide"}function g(e){for(var t=0;t<m.length;++t)m[t].enable&&(e&&e.key===m[t].key?m[t].sort=!m[t].sort:m[t].sort=null)}function u(e){k(d=e,m)}function s(e,t){var n=document.createElement("td");n.innerText=t,e.appendChild(n)}function h(e,t,n){var r=document.createElement("i");r.className="fa "+t,e.appendChild(r),r.addEventListener("click",function(e){var i;g(n),i=n,a&&v("budget"===i.key||"titleYear"===i.key?a.sort(function(e,t){var n=parseInt(e[i.key]||0),r=parseInt(t[i.key]||0);return i.sort?n-r:r-n}):a.sort(function(e,t){var n=e[i.key],r=t[i.key];return n==r?0:i.sort?n<r?-1:1:r<n?-1:1}))})}function f(e,t){var n=document.createElement("th"),r=document.createElement("div");r.style.position="relative";var i,a,o,c,l,u=document.createElement("span");if(u.innerText=t.title,r.appendChild(u),n.appendChild(r),t.enable){l=r,null==(c=t).sort?(h(l,"fa-caret-up",c),h(l,"fa-caret-down",c)):c.sort?h(l,"fa-caret-up",c):h(l,"fa-caret-down",c);var s=document.createElement("div");i=t,a=s,(o=document.createElement("input")).setAttribute("type","text"),o.setAttribute("name",i.key),o.value=i.filter||"",o.addEventListener("keyup",function(e){13==e.keyCode&&"INPUT"===e.target.tagName&&(i.filter=e.target.value,g(),k(d,m))}),a.appendChild(o),n.appendChild(s)}e.appendChild(n)}function v(e){!function(){var e=document.querySelector("#movie-table-head");o.cleanEverythingFromHTML(e);for(var t=document.createElement("tr"),n=0;n<m.length;++n)f(t,m[n]);e.appendChild(t)}(),function(e){var t,n,r,i=document.querySelector("#movie-table-body");for(o.cleanEverythingFromHTML(i),t=0;t<e.length;++t)r=e[t],s(n=document.createElement("tr"),r.title),s(n,r.directorName),s(n,r.actor1Name),s(n,r.actor2Name),s(n,r.genres),s(n,r.language),s(n,r.country),s(n,r.contentRating),s(n,r.budget),s(n,r.titleYear),s(n,r.plotKeywords),s(n,r.movieImdbLink),i.appendChild(n)}(e)}function p(e){window.scrollTo(0,0),o.cleanEverythingFromHTML(n),v(a=e.data),i.setUI(e.maxSize)}function y(e){o.cleanEverythingFromHTML(n);var t=document.createElement("div");t.className="error-msg",t.innerText=-1==e.status?"This request has been blocked; the content must be served over HTTPS.":"Something went wrong",n.appendChild(t)}function k(e,t){l(!0),r.fetchMovies(e,t).then(p).catch(y).finally(function(){l(!1)})}i.init(u),c.setup(),k()}(_GLOBAL_MODULE);